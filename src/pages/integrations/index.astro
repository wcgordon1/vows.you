---
// Fundations
import BaseLayout from "@/layouts/BaseLayout.astro";
import Text from "@/components/fundations/elements/Text.astro";
import Button from "@/components/fundations/elements/Button.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Components
import IntegrationsCard from "@/components/integrations/IntegrationsCard.astro";
// Icons
import ChevronRight from "@/components/fundations/icons/ChevronRight.astro";
// Content
import { getCollection } from "astro:content";
const allIntegrations = (await getCollection("integrations")).sort((a, b) =>
  a.data.integration.localeCompare(b.data.integration)
);
const allTags = Array.from(
  new Set(allIntegrations.flatMap((post) => post.data.tags))
).sort();
---

<BaseLayout title="Integrations | vows.you" description="Explore how vows.you works with the tools and workflows you already use.">
  <section>
    <Wrapper variant="standard" class="pt-32 pb-4">
      <div class="max-w-xl mx-auto text-center text-balance">
        <Text
          tag="h1"
          variant="displayMD"
          class="font-serif font-medium tracking-tight text-black"
        >
          Ways to use vows.you
        </Text>
        <Text tag="p" variant="textBase" class="mt-4 text-base-500">
          Explore how vows.you works with the tools and workflows you already use.
        </Text>
      </div>

      <nav class="py-4 bg-white lg:sticky lg:top-16 lg:z-10">
        <ul class="flex flex-wrap justify-between gap-2">
          {
            allTags.map((tag) => (
              <li>
                <Button
                  isLink
                  size="sm"
                  variant="muted"
                  href={`#tag-${tag}`}
                  aria-label={`Jump to ${tag} integrations`}
                >
                  {tag}
                </Button>
              </li>
            ))
          }
        </ul>
      </nav>
      <div class="flex flex-col mt-12 gap-4 lg:col-span-4">
        {
          allTags.map((tag) => (
            <section id={`tag-${tag}`} class="pt-4 ">
              <Text
                tag="h2"
                variant="textXL"
                class="font-serif capitalize text-base-800"
              >
                {tag}
              </Text>

              <div class="mt-4 grid grid-cols-1 gap-x-8 gap-y-14 md:grid-cols-2 lg:grid-cols-3">
                {allIntegrations
                  .filter((post) => post.data.tags.includes(tag))
                  .map((post) => (
                    <IntegrationsCard post={post} />
                  ))}
              </div>
            </section>
          ))
        }
      </div>
    </Wrapper>
  </section>
</BaseLayout>
