---
export const description = "Pricing section with two tiers";

// Components
import Text from "@/components/fundations/elements/Text.astro";
import Button from "@/components/fundations/elements/Button.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";

// Icons (import all used ones)
import Check from "@/components/fundations/icons/Check.astro";
import X from "@/components/fundations/icons/X.astro";
import Minus from "@/components/fundations/icons/Minus.astro";

const pricingOptions = [
  {
    id: "Free",
    cardClass: "bg-sand-50",
    primaryTextColor: "text-base-900",
    secondaryTextColor: "text-base-500",
    featuresBorderColor: "border-base-200",
    title: "Free Forever",
    price: "$0",
    priceLabel: "forever",
    description:
      "Try vows.you and see if it feels right. No commitment.",
    button: {
      text: "Start writing",
      variant: "accent",
      href: "https://app.vows.you/workspace",
    },
    featuresHeading: "Free plan includes:",
    features: [
      { text: "Guided prompts" },
      { text: "Basic structure guide" },
      { text: "Save 1 draft" },
      { text: "Read time estimate" },
      { text: "Export to text" },
    ],
  },
  {
    id: "FullAccess",
    cardClass: "bg-sand-100",
    primaryTextColor: "text-base-900",
    secondaryTextColor: "text-base-500",
    featuresBorderColor: "border-base-200",
    title: "Full Access",
    price: "$129",
    priceLabel: "one-time",
    description: "Everything you need to write vows you'll be proud of.",
    button: {
      text: "Get full access",
      variant: "accent",
      href: "https://app.vows.you/workspace",
    },
    featuresHeading: "Everything in Free, plus:",
    features: [
      { text: "All prompts and guides" },
      { text: "Unlimited drafts" },
      { text: "Practice mode with timing" },
      { text: "Tone suggestions" },
      { text: "Print-ready export" },
      { text: "Email support" },
      { text: "Priority support" },
      { text: "Ceremony day checklist" },
    ],
  },
];

// Table
export const pricingFeatures = [
  {
    category: "Writing Tools",
    features: [
      { label: "Guided prompts", values: ["Basic", "All prompts"] },
      { label: "Structure guide", values: ["yes", "yes"] },
      { label: "Tone suggestions", values: ["no", "yes"] },
      { label: "Practice mode", values: ["no", "yes"] },
      { label: "Read time tracking", values: ["yes", "yes"] },
    ],
  },
  {
    category: "Drafts & Export",
    features: [
      { label: "Saved drafts", values: ["1", "Unlimited"] },
      { label: "Export to text", values: ["yes", "yes"] },
      { label: "Print-ready export", values: ["no", "yes"] },
      { label: "Mobile access", values: ["yes", "yes"] },
    ],
  },
  {
    category: "Support",
    features: [
      { label: "Email support", values: ["no", "yes"] },
      { label: "Priority support", values: ["no", "yes"] },
      { label: "Help guides", values: ["yes", "yes"] },
      { label: "Ceremony day checklist", values: ["no", "yes"] },
    ],
  },
];
---

<section
  id="pricing-section"
  class="border-t border-base-200 border-dashed border-dashed scroll-mt-24"
>
  <Wrapper variant="standard" class="pt-12 pb-4">
    <div class="text-center text-balance">
      <Text
        tag="h2"
        variant="displayMD"
        class="font-serif font-medium tracking-tight text-black"
      >
        Simple, transparent pricing
      </Text>
      <Text
        tag="p"
        variant="textBase"
        class="max-w-xl mx-auto mt-4 text-base-500"
      >
        Start free. Upgrade when you're ready to practice and polish.
      </Text>
    </div>

    <!-- Pricing Cards -->
    <div class="mt-12 grid grid-cols-1 gap-4 md:grid-cols-2 max-w-3xl mx-auto">
      {
        pricingOptions.map((tier) => (
          <div
            class={`flex flex-col h-full justify-between p-4 rounded-xl ${tier.cardClass}`}
          >
            <div class="flex flex-col">
              <Text
                tag="h3"
                variant="textBase"
                class={`font-medium text-base-900 ${tier.primaryTextColor}`}
              >
                {tier.title}
              </Text>
              <Text
                variant="displaySM"
                class={`font-medium flex items-baseline tracking-tighter mt-2 font-serif ${tier.primaryTextColor}`}
              >
                <span>{tier.price}</span>
                <span
                  class={`text-sm font-normal tracking-normal ml-1 ${tier.secondaryTextColor}`}
                >
                  {tier.priceLabel}
                </span>
              </Text>
              <Text
                tag="p"
                variant="textSM"
                class={`mt-2 ${tier.secondaryTextColor}`}
              >
                {tier.description}
              </Text>

              <div class={`mt-4 pt-4 border-t ${tier.featuresBorderColor}`}>
                <Text
                  tag="p"
                  variant="textXS"
                  class={`font-medium uppercase ${tier.secondaryTextColor}`}
                >
                  {tier.featuresHeading}
                </Text>
                <ul
                  class={`flex flex-col mt-4 text-sm gap-y-3 ${tier.primaryTextColor}`}
                  role="list"
                >
                  {tier.features.map((feature) => (
                    <li class="flex items-start gap-2">
                      <Check
                        size="sm"
                        class={`shrink-0 ${tier.secondaryTextColor}`}
                      />
                      <span>{feature.text}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
            <div class="w-full mt-8">
              <Button
                isLink
                class="w-full"
                variant={tier.button.variant}
                size="sm"
                href={tier.button.href}
                data-ph-event="pricing_cta_clicked"
                data-ph-prop-plan={tier.id}
                data-ph-prop-context="card"
              >
                {tier.button.text}
              </Button>
            </div>
          </div>
        ))
      }
    </div>
    <div class="w-full mt-12 overflow-x-auto">
      <div
        class="min-w-[640px] border border-base-200 rounded-xl overflow-hidden max-w-3xl mx-auto"
      >
        <table class="w-full text-sm">
          <thead class="text-center border-b border-base-200">
            <tr>
              <th class="px-4 pt-8 pb-2 font-medium text-left text-base-900"
                >Features</th
              >
              <th class="px-4 py-2 font-medium text-base-900">Free</th>
              <th class="px-4 py-2 font-medium text-base-900">Full Access</th>
            </tr>
          </thead>
          <tbody>
            {
              pricingFeatures.map(({ category, features }) => (
                <>
                  <tr class="font-semibold bg-sand-100">
                    <td
                      colspan="3"
                      class="px-4 py-8 text-base font-medium border-b text-base-900 border-base-200"
                    >
                      {category}
                    </td>
                  </tr>
                  {features.map(({ label, values }) => (
                    <tr class="border-b border-base-200">
                      <td class="px-4 py-2 text-base-500">{label}</td>
                      {values.map((value) => (
                        <td class="px-4 py-4 text-center text-base-500">
                          {value === "yes" ? (
                            <X size="sm" class="mx-auto" />
                          ) : value === "no" ? (
                            <Minus size="sm" class="mx-auto" />
                          ) : (
                            value
                          )}
                        </td>
                      ))}
                    </tr>
                  ))}
                </>
              ))
            }
            <tr>
              <td></td>
              <td class="px-4 py-2 text-center text-base-500">
                <Button
                  isLink
                  class="w-full"
                  variant="accent"
                  size="sm"
                  href="https://app.vows.you/workspace"
                  data-ph-event="pricing_cta_clicked"
                  data-ph-prop-plan="Free"
                  data-ph-prop-context="table"
                >
                  Start writing
                </Button>
              </td>
              <td class="px-4 py-2 text-center text-base-500">
                <Button
                  isLink
                  class="w-full"
                  variant="accent"
                  size="sm"
                  href="https://app.vows.you/workspace"
                  data-ph-event="pricing_cta_clicked"
                  data-ph-prop-plan="FullAccess"
                  data-ph-prop-context="table"
                >
                  Get full access
                </Button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </Wrapper>
</section>
